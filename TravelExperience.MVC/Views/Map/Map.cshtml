
@model TravelExperience.MVC.ViewModels.MapViewModel
@{ ViewBag.Title = "Map"; }

<style>
    #map {
        height: 400px;
        width: 700px;
    }
</style>
<br />

<div class="row">
    <div id="map">
        <script>
            var map;
            function initMap() {
                map = new google.maps.Map(document.getElementById('map'), {
                    center: { lat: 37.98096185419733, lng: 23.732283397775806 },
                    zoom: 10
                });
                $.get("@Url.Action("GetLocation", "Map")", function (data2, status) {
                    var data = JSON.parse(data2)
                    var marker = [];
                    var contentString = [];
                    var infowindow = [];
                    for (var i = 0; i < data.length; i++) {
                        marker[i] = new google.maps.Marker({
                            position: new google.maps.LatLng(data[i].Xcoord, data[i].Ycoord),
                               /* { lat: parseFloat(data[i].Xcoord), lng: parseFloat(data[i].Ycoord) },*/
                            map: map
                        });
                        contentString[i] = '<div id="content">' +
                            '<div id="siteNotice">' +
                            '</div>' +
                            '<h1 id="firstHeading" class="firstHeading>' + data[i].Address + '</h1>';
                        infowindow[i] = new google.maps.InfoWindow({
                            content: contentString[i]
                        });
                        var mdl = marker[i];
                        google.maps.event.addListener(marker[i], 'mouseover', (function (mdl, i) {
                            return function () {
                                infowindow[i].open(map, marker[i]);
                            }
                        })(marker[i], i));
                        google.maps.event.addListener(marker[i], 'mouseout', (function (mdl, i) {
                            return function () {infowindow[i].close();
                            }
                        })(marker[i], i));
                    }
                })

            }
        </script>

        @*<script>
                var map;
                function initMap() {
                    map = new google.maps.Map(document.getElementById('map'), {
                        center: { lat: 37.98096185419733, lng: 23.732283397775806 },
                        zoom: 12
                    });
                    var marker1 = new google.maps.Marker({
                        position: { lat: 37.98096185419733, lng: 23.7322833 },
                        map: map
                    });
                    var marker2 = new google.maps.Marker({
                        position: { lat: 37.983679, lng: 23.730461897775804 },
                        map: map
                    });
                    var contentStringForMarker1 = '<div id="content">' +
                        '<div id="siteNotice">' +
                        '</div>' +
                        '<h1 id="firstHeading" class="firstHeading>AccommodationName</h1>' +
                        '<div id="bodyContent">' +
                        '<p><b>AccommodationName</b>,  a small description  of the accommodation</p>' +
                        '</div>';
                    var infowindow = new google.maps.InfoWindow({
                        content: contentStringForMarker1
                    });
                    marker1.addListener('click', function () {
                        infowindow.open(map, marker1);
                    });
                }
            </script>*@

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCLxLZZ4ElJQCQT_Ppnc_KoQC30aESetyE&callback=initMap"
                async defer></script>

    </div>
</div>
